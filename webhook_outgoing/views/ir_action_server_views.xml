<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="inherited_server_action_custom_webhook_form" model="ir.ui.view">
        <field name="name">inherited.server.action.custom.webhook.form</field>
        <field name="model">ir.actions.server</field>
        <field name="inherit_id" ref="base.view_server_action_form" />
        <field name="arch" type="xml">
            <notebook position="inside">
                <page
                    string="Webhook"
                    name='custom_webhook'
                    attrs="{'invisible': [('state', '!=', 'custom_webhook')]}"
                >
                    <group>
                        <group>
                            <field
                                name="endpoint"
                                attrs="{'required': [('state', '==', 'custom_webhook')]}"
                            />
                            <field name="headers" />
                            <field
                                name="request_method"
                                attrs="{'required': [('state', '==', 'custom_webhook')]}"
                            />
                            <field
                                name="request_type"
                                attrs="{'required': [('state', '==', 'custom_webhook')]}"
                            />
                        </group>
                        <group>
                            <field name="log_webhook_calls" />
                            <field name="delay_execution" />
                            <field name="delay" />
                        </group>
                    </group>

                    <field
                        name="body_template"
                        nolabel="1"
                        widget="ace"
                        options="{'mode': 'python'}"
                    />

                    <p>Learn more template syntax at <a
                            href="https://jinja.palletsprojects.com/en/3.1.x/templates/"
                            target="_blank"
                        >https://jinja.palletsprojects.com/en/3.1.x/templates/</a></p>
                </page>
            </notebook>
        </field>
    </record>
</odoo>
